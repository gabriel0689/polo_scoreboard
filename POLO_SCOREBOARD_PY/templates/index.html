
<!DOCTYPE html>
<html>
<head>
    <title>Scoreboard Display</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #1a1a1a; color: #fff; display: flex; flex-direction: column; height: 100vh; }
        .footer { text-align: center; padding: 10px; margin-top: 20px; font-size: 0.8em; color: #777; border-top: 1px solid #333; }
        .nav { background: #333; padding: 10px 20px; display: flex; align-items: center; }
        .nav a { margin-right: 15px; color: #0f0; text-decoration: none; font-weight: bold; }
        .serial-controls { margin-left: auto; display: flex; align-items: center; gap: 6px; }
        .serial-controls select, .serial-controls button { font-size: 1em; padding: 2px 6px; }
        .scoreboard { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .time { font-size: 8vw; font-weight: 600; margin-bottom: 20px; font-family: 'Orbitron', monospace; color: #ffd700; letter-spacing: 0.05em; text-shadow: none !important; }
        .score-table { border-collapse: collapse; width: 80%; max-width: 600px; margin: 0 auto; }
        .score-table th { font-size: 2vw; padding: 10px; text-align: center; background-color: #333; }
        .score-table td { font-size: 10vw; padding: 20px; text-align: center; font-weight: bold; font-family: 'Orbitron', sans-serif; letter-spacing: 0.05em; }
        .home { color: #0cf; }
        .away { color: #f80; }
        .status { position: fixed; bottom: 10px; right: 10px; color: #888; font-size: 12px; cursor: pointer; }
        .disconnected { color: #f44; }
        #nameFields{flex-grow: 1;}
        button { background: #333; color: #fff; border: none; padding: 8px 16px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="/">Scoreboard</a>
        <a href="/debug">Debug</a>
        <a href="/settings">Settings</a>
        <div class="serial-controls">
            <select id="portSelect"></select>
            <button onclick="connectPort()">Connect</button>
            <button onclick="scanPorts()">Scan Ports</button>
        </div>
    </div>
    <div class="scoreboard">
        <div class="time" id="time">00:00</div>
        <table class="score-table">
            <tr><th id="homeName">HOME</th><th id="awayName">AWAY</th></tr>
            <tr><td class="home" id="home">0</td><td class="away" id="away">0</td></tr>
        </table>
    </div>
    <div id="nameFields" style="display: flex; justify-content: center; margin: 32px 0 0 0; width: 100%;">
        <div style="display: flex; flex-direction: row; justify-content: center; width: 80%; max-width: 600px; gap: 40px;">
            <div style="flex: 1; display: flex; flex-direction: column; align-items: stretch;">
                <input type="text" id="homeNameInput" placeholder="Home Name" style="text-align: center; font-size: 2vw; margin-bottom: 10px; width: 100%; height: 50px; border-radius: 6px; border: 1.5px solid #444; background: #111; color: #0cf; font-weight: bold;">
                <button type="button" onclick="submitName('home')" style="background: #0cf; color: #111; font-weight: bold; border: none; border-radius: 6px; height: 50px; font-size: 2vw; width: 100%; cursor: pointer;">Set Home</button>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; align-items: stretch;">
                <input type="text" id="awayNameInput" placeholder="Away Name" style="text-align: center; font-size: 2vw; margin-bottom: 10px; width: 100%; height: 50px; border-radius: 6px; border: 1.5px solid #444; background: #111; color: #f80; font-weight: bold;">
                <button type="button" onclick="submitName('away')" style="background: #f80; color: #111; font-weight: bold; border: none; border-radius: 6px; height: 50px; font-size: 2vw; width: 100%; cursor: pointer;">Set Away</button>
            </div>
        </div>
    </div>
    <div id="status" class="status">Not connected</div>
    <div class="footer">Made with love by Face Cage CO. <span id="currentYear"></span></div>
    <script>document.getElementById('currentYear').textContent = new Date().getFullYear();</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        const socket = io();
        const timeDisplay = document.getElementById('time');
        const homeDisplay = document.getElementById('home');
        const awayDisplay = document.getElementById('away');
        const statusDisplay = document.getElementById('status');
        const portSelect = document.getElementById('portSelect');
        function scanPorts() { socket.emit('scan_ports'); }
        function connectPort() { const port = portSelect.value; if (port) socket.emit('connect_port', { port }); }
        socket.on('port_list', data => {
            portSelect.innerHTML = '';
            data.ports.forEach(p => {
                const opt = document.createElement('option');
                opt.value = p.name; opt.textContent = p.name + (p.description ? ' - ' + p.description : '');
                if (data.current_port === p.name) opt.selected = true;
                portSelect.appendChild(opt);
            });
        });
        socket.on('scoreboard_data', data => {
            if (data.time) timeDisplay.textContent = data.time;
            if (data.home) homeDisplay.textContent = data.home;
            if (data.away) awayDisplay.textContent = data.away;
            if (data.home_name) document.getElementById('homeName').textContent = data.home_name;
            if (data.away_name) document.getElementById('awayName').textContent = data.away_name;
        });

        function submitName(side) {
            const input = side === 'home' ? document.getElementById('homeNameInput') : document.getElementById('awayNameInput');
            const value = input.value.trim();
            if (value) {
                socket.emit('set_name', { side, value });
            }
        }
        socket.on('status_update', data => {
            statusDisplay.textContent = data.message;
            if (data.connected) statusDisplay.classList.remove('disconnected');
            else statusDisplay.classList.add('disconnected');
        });
        // Initial scan
        scanPorts();
    </script>
</body>
</html>
        